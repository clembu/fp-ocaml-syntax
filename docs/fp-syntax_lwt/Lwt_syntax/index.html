<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_syntax (fp-syntax_lwt.Lwt_syntax)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">fp-syntax_lwt</a> &#x00BB; Lwt_syntax</nav><h1>Module <code>Lwt_syntax</code></h1><p>These are useful operators when using Lwt with OCaml 4.08.0 and later.</p><p>They make the choice of using the character <code>%</code> to note their <code>Lwt.t</code> nature.</p><nav class="toc"><ul><li><a href="#infix">Infix Operators</a></li><li><a href="#bindings">Binding operators</a></li></ul></nav></header><section><header><h2 id="infix"><a href="#infix" class="anchor"></a>Infix Operators</h2><p>These use the character <code>%</code> to help differenciate from other infix monadic operators.</p><p>The &quot;not recommended&quot; operators (<code>Lwt.(&lt;&amp;&gt;)</code> and <code>Lwt.(&lt;?&gt;)</code>) are not included.</p><dl><dt>see <a href="https://ocsigen.org/lwt/latest/api/Lwt.Infix">https://ocsigen.org/lwt/latest/api/Lwt.Infix</a></dt><dd><p>The official Lwt documentation for operators</p></dd></dl></header><dl><dt class="spec value" id="val-(&gt;&gt;%)"><a href="#val-(&gt;&gt;%)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;%) : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dd><p>The same as <code>Lwt.(&gt;&gt;=)</code>. Equivalent to <code>Lwt.bind</code>.</p><p>Usage example:</p><pre><code class="ml">let () =
  Lwt_main.run
    (Lwt_io.(read_line stdin) &gt;&gt;% Lwt_io.printl)</code></pre><p>It is recommended to use <a href="index.html#val-let&gt;%"><code>let&gt;%</code></a> instead.</p><dl><dt>see <a href="https://ocsigen.org/lwt/latest/api/Lwt#VALbind">https://ocsigen.org/lwt/latest/api/Lwt#VALbind</a></dt><dd><p>The official Lwt documentation for <code>Lwt.bind</code></p></dd></dl></dd></dl><dl><dt class="spec value" id="val-(&gt;|%)"><a href="#val-(&gt;|%)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|%) : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dd><p>The same as <code>Lwt.(&gt;|=)</code>. Equivalent to <code>Lwt.map</code>.</p><p>Usage example:</p><pre><code class="ml">let () =
  Lwt_main.run
    (Lwt_io.(read_line stdin) &gt;|% ignore)</code></pre><p>It is recommended to use <a href="index.html#val-let|%"><code>let|%</code></a> instead.</p><dl><dt>see <a href="https://ocsigen.org/lwt/latest/api/Lwt#VALmap">https://ocsigen.org/lwt/latest/api/Lwt#VALmap</a></dt><dd><p>The official Lwt documentation for <code>Lwt.map</code></p></dd></dl></dd></dl></section><section><header><h2 id="bindings"><a href="#bindings" class="anchor"></a>Binding operators</h2><p>These use the character <code>%</code> to help differenciate from other monadic binding operators.</p></header><dl><dt class="spec value" id="val-let&gt;%"><a href="#val-let&gt;%" class="anchor"></a><code><span class="keyword">val</span> let&gt;% : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dd><p>The same as the PPX <code>let%lwt</code> from <code>Ppx_lwt</code>. Equivalent to <a href="index.html#val-(&gt;&gt;%)"><code>(&gt;&gt;%)</code></a> and <code>Lwt.bind</code>.</p><p>Usage example:</p><pre><code class="ml">let () =
  let read_line_and_print_it =
    let&gt;% line = Lwt_io.read_line stdin in
    Lwt_io.printl line
  in
  Lwt_main.run read_line_and_print_it</code></pre><dl><dt>see <a href="https://ocsigen.org/lwt/latest/api/Ppx_lwt#2_Ppxextensions">https://ocsigen.org/lwt/latest/api/Ppx_lwt#2_Ppxextensions</a></dt><dd><p>The official Lwt documentation for <code>let%lwt</code></p></dd></dl></dd></dl><dl><dt class="spec value" id="val-let|%"><a href="#val-let|%" class="anchor"></a><code><span class="keyword">val</span> let|% : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dd><p>Has no equivalent in <code>Ppx_lwt</code>. Equivalent to <a href="index.html#val-(&gt;|%)"><code>(&gt;|%)</code></a> and <code>Lwt.map</code>.</p><p>Usage example:</p><pre><code class="ml">let () =
  let read_line_and_print_its_length =
    let&gt;% line_length =
      let|% line = Lwt_io.read_line stdin in
      String.length line (* directly map to an int. No Lwt.t *)
    in
    Lwt_io.printl line_length
  in
  Lwt_main.run read_line_and_print_its_length</code></pre></dd></dl><dl><dt class="spec value" id="val-and*%"><a href="#val-and*%" class="anchor"></a><code><span class="keyword">val</span> and*% : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> Lwt.t</span></code></dt><dd><p>Same as using <code>and</code> with <code>let%lwt</code> from <code>Ppx_lwt</code>. Equivalent to <code>Lwt.both</code>.</p><p>Usage example:</p><pre><code class="ml">let () =
  (* This reads a line from stdin, and prints it to stdout
   * but only if five seconds have passed since the beginning
   * of the program. *)
  let p =
    let&gt;% line = Lwt_io.read_line stdin
    and&gt;% () = Lwt_unix.sleep 5. in
    Lwt_io.printl line
  in
  Lwt_main.run p</code></pre><dl><dt>see <a href="https://ocsigen.org/lwt/latest/api/Lwt#VALboth">https://ocsigen.org/lwt/latest/api/Lwt#VALboth</a></dt><dd><p>The official Lwt documentation for <code>Lwt.both</code></p></dd></dl></dd></dl></section></div></body></html>