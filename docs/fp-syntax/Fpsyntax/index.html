<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fpsyntax (fp-syntax.Fpsyntax)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">fp-syntax</a> &#x00BB; Fpsyntax</nav><h1>Module <code>Fpsyntax</code></h1><p>This syntax library provides three different types of operators: binding operators, infix operators, and prefix operators.</p><nav class="toc"><ul><li><a href="#bindings">Binding Operators</a><ul><li><a href="#bindopt">Options</a></li><li><a href="#bindres">Results</a></li><li><a href="#bindls">Lists</a></li></ul></li><li><a href="#infix">Infix Operators</a><ul><li><a href="#infopt">Options</a></li><li><a href="#infres">Results</a></li><li><a href="#infls">Lists</a></li></ul></li></ul></nav></header><section><header><h2 id="bindings"><a href="#bindings" class="anchor"></a>Binding Operators</h2><p>A couple of general rules to read those.</p><p>1. The first character notes the kind of binding that it is:</p><ul><li>The character <code>&gt;</code> evokes a monadic binding (read <code>&gt;&gt;=</code>)</li><li>The character <code>|</code> evokes a monadic mapping (read <code>&gt;|=</code>)</li></ul><p>2. The rest of the characters note the types used in the binding.</p></header><section><header><h3 id="bindopt"><a href="#bindopt" class="anchor"></a>Options</h3><p>The character that represents option types is <code>?</code>.</p></header><dl><dt class="spec value" id="val-let|?"><a href="#val-let|?" class="anchor"></a><code><span class="keyword">val</span> let|? : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dd><p><code>let|? x = y in f x</code> is <code>Some (f a)</code> if <code>y = Some a</code>, and <code>None</code> otherwise.</p><p>I use it to get a value that might not exist, and do something with it only if it exists.</p><p>Example:</p><pre><code class="ml">let|? x = get_int_option () in
x + 2</code></pre></dd></dl><dl><dt class="spec value" id="val-let&gt;?"><a href="#val-let&gt;?" class="anchor"></a><code><span class="keyword">val</span> let&gt;? : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dd><p><code>let&gt;? x = y in f x</code> is <code>f a</code> if <code>y = Some a</code>, and <code>None</code> otherwise.</p><p>I use it to get a value that might not exist, and do something with it that is only defined in some cases, only if it exists.</p><p>For example:</p><pre><code class="ml">let x = 2 in
let&gt;? y = get_int_option () in
if y = 0 then None else Some (x/y)</code></pre></dd></dl><dl><dt class="spec value" id="val-and*?"><a href="#val-and*?" class="anchor"></a><code><span class="keyword">val</span> and*? : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> option</span></code></dt></dl></section><section><header><h3 id="bindres"><a href="#bindres" class="anchor"></a>Results</h3><p>The character that represents result types is <code>&amp;</code>.</p><p>The character that represents operations on errors is <code>!</code>.</p></header><dl><dt class="spec value" id="val-let&gt;&amp;"><a href="#val-let&gt;&amp;" class="anchor"></a><code><span class="keyword">val</span> let&gt;&amp; : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt><dd><p><code>let&gt;? x = y in f x</code> is <code>Ok (f v)</code> if <code>y = Ok v</code>, and <code>Error e</code> if <code>y = Error e</code>.</p><p>I use it to name a result value only if it is valid.</p></dd></dl><dl><dt class="spec value" id="val-let|&amp;"><a href="#val-let|&amp;" class="anchor"></a><code><span class="keyword">val</span> let|&amp; : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-and*&amp;"><a href="#val-and*&amp;" class="anchor"></a><code><span class="keyword">val</span> and*&amp; : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt></dl></section><section><header><h3 id="bindls"><a href="#bindls" class="anchor"></a>Lists</h3><p>The character representing list types is <code>:</code>.</p></header><dl><dt class="spec value" id="val-let&gt;:"><a href="#val-let&gt;:" class="anchor"></a><code><span class="keyword">val</span> let&gt;: : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span></code></dt><dt class="spec value" id="val-let|:"><a href="#val-let|:" class="anchor"></a><code><span class="keyword">val</span> let|: : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span></code></dt><dt class="spec value" id="val-and*:"><a href="#val-and*:" class="anchor"></a><code><span class="keyword">val</span> and*: : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> list</span></code></dt></dl></section></section><section><header><h2 id="infix"><a href="#infix" class="anchor"></a>Infix Operators</h2><p>These operators fall into a few categories:</p><ul><li>Monadic bindings: begin with <code>&gt;&gt;</code></li><li>Monadic mappings: begin with <code>&gt;|</code></li><li>Value combinations: wrapped in <code>&lt;</code> <code>&gt;</code></li><li>Structural prependers: begin with <code>@</code></li><li>Alternatives: begin with <code>|</code></li></ul></header><section><header><h3 id="infopt"><a href="#infopt" class="anchor"></a>Options</h3><p>Once again, the character representing option types is <code>?</code>.</p></header><dl><dt class="spec value" id="val-(&gt;&gt;?)"><a href="#val-(&gt;&gt;?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;?) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dd><p><code>y &gt;&gt;? (fun x -&gt; f x)</code> is exactly equivalent to <code>let&gt;? x = y in f x</code></p></dd></dl><dl><dt class="spec value" id="val-(&gt;|?)"><a href="#val-(&gt;|?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|?) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dt class="spec value" id="val-(&lt;*?&gt;)"><a href="#val-(&lt;*?&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;*?&gt;) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> option</span></code></dt><dt class="spec value" id="val-(|?)"><a href="#val-(|?)" class="anchor"></a><code><span class="keyword">val</span> (|?) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><ul><li><code>Some x |? y</code> is <code>x</code></li><li><code>None |? y</code> is <code>y</code></li></ul></dd></dl></section><section><header><h3 id="infres"><a href="#infres" class="anchor"></a>Results</h3><p>For an <code>('ok,'err) result</code> type, operators with the character <code>&amp;</code> transform the <code>'ok</code> value, and operators with the character <code>!</code> transform the <code>'err</code> value</p></header><dl><dt class="spec value" id="val-(&gt;&gt;&amp;)"><a href="#val-(&gt;&gt;&amp;)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;&amp;) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&gt;|&amp;)"><a href="#val-(&gt;|&amp;)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|&amp;) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&lt;*&amp;&gt;)"><a href="#val-(&lt;*&amp;&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;*&amp;&gt;) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'err</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&gt;|!)"><a href="#val-(&gt;|!)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|!) : <span><span>(<span class="type-var">'ok</span>, <span class="type-var">'a</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'ok</span>, <span class="type-var">'b</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&lt;*!&gt;)"><a href="#val-(&lt;*!&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;*!&gt;) : <span><span>(<span class="type-var">'ok</span>, <span class="type-var">'a</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'ok</span>, <span class="type-var">'b</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'ok</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> Stdlib.result</span></code></dt></dl></section><section><header><h3 id="infls"><a href="#infls" class="anchor"></a>Lists</h3><p>The character representing list types is <code>:</code>.</p></header><dl><dt class="spec value" id="val-(&gt;&gt;:)"><a href="#val-(&gt;&gt;:)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;:) : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span></code></dt><dt class="spec value" id="val-(&gt;|:)"><a href="#val-(&gt;|:)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|:) : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span></code></dt><dt class="spec value" id="val-(&lt;*:&gt;)"><a href="#val-(&lt;*:&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;*:&gt;) : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> list</span></code></dt><dt class="spec value" id="val-(@:)"><a href="#val-(@:)" class="anchor"></a><code><span class="keyword">val</span> (@:) : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-(@$)"><a href="#val-(@$)" class="anchor"></a><code><span class="keyword">val</span> (@$) : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-(@?)"><a href="#val-(@?)" class="anchor"></a><code><span class="keyword">val</span> (@?) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-(@?$)"><a href="#val-(@?$)" class="anchor"></a><code><span class="keyword">val</span> (@?$) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-(@$?)"><a href="#val-(@$?)" class="anchor"></a><code><span class="keyword">val</span> (@$?) : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-(@??)"><a href="#val-(@??)" class="anchor"></a><code><span class="keyword">val</span> (@??) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt></dl></section></section></div></body></html>